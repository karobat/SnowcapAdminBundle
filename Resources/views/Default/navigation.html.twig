{% macro menu_item(route, routeParams, label, title) %}
<li>
    <a href="{{ path(route, routeParams) }}" title="{{ title | trans }}">{{ label | trans }}</a>
</li>
{% endmacro %}
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="{{ path('snowcap_admin_default_index') }}">
                {{ "project.name"|trans({}, 'SnowcapAdminBundle') }}
            </a>
            <ul class="nav">
                {% for admin in sections %}
                {{ _self.menu_item(admin.defaultRoute, {'code': admin.code}, admin.param('label')) }}
                {% endfor %}
            </ul>
            <ul class="nav pull-right">
                {% set active_locales = get_active_locales(app.request.locale) %}
                {% if active_locales|length > 1 %}
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{ active_locales[app.request.locale] }}
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            {% for locale_key, locale_value in active_locales if locale_key != app.request.locale %}
                                <li><a href="{{ path('snowcap_admin_switch_locale', {'locale': locale_key}) }}">{{ locale_value }}</a></li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endif %}
            </ul>
        </div>
    </div>
</div>
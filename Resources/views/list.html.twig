{# datalist grid block #}
{% block datalist_grid %}
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            {% for field in datalist.fields %}
                {{ datalist_header(field) }}
            {% endfor %}
            {% if datalist.actions|length > 0 %}
                <th>{{ "content.actions.header"|trans({}, 'SnowcapAdminBundle') }}</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for data_row in datalist %}
        <tr>
            {% for field in datalist.fields %}
                {{ datalist_cell(field, data_row) }}
            {% endfor %}
            {% if datalist.actions | length > 0 %}
                <td class="listing-actions">{{ block('row_actions') }}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% if datalist.paginator is not null %}
    {% include 'SnowcapBootstrapBundle:Widget:paginator.html.twig' with {'paginator': datalist.paginator} %}
{% endif %}
{% endblock datalist_grid %}

{# datalist grid header block #}
{% block datalist_grid_header %}
    <th>{{ field.options.label|trans }}</th>
{% endblock %}


{% block datalist_grid_cell_text %}
    <td>
        {% if value is not null %}
            {{ value|raw }}
        {% else %}
            <span class="emptyvalue">{{ "data.emptyvalue"|trans({}, 'SnowcapAdminBundle') }}</span>
        {% endif %}
{% endblock %}

{% block grid_cell_datetime %}
    <td>
        {% set value = datalist_value(data_row, column.path, column.options) %}
        {% if value is not null %}
            {{ value|date(column.options.format)  }}
        {% else %}
            <span class="emptyvalue">{{ "data.emptyvalue"|trans({}, 'SnowcapAdminBundle') }}</span>
        {% endif %}
    </td>
{% endblock %}

{% block grid_cell_label %}
    {% set mappings = column.options.mappings %}
    {% set value = datalist_value(data_row, column.path, column.options) %}
    <td><span class="label label-{{ mappings[value][1] }}">{{ mappings[value][0]|trans }}</span></td>
{% endblock %}

{# thumbnail view #}
{% block list_thumbnail %}
<ul class="thumbnails">
    {% for data_row in list.data %}
    <li class="span3">
        <div class="thumbnail">
            {{ block('list_thumbnail_visual') }}
            <div class="caption">
                {% if list.view.label is not null %}
                    <h4 title="{{ datalist_value(data_row, list.view.label.path, list.view.label.options) }}">{{ datalist_value(data_row, list.view.label.path, list.view.label.options)|truncate(20) }}</h4>
                {% endif %}
                {% if list.view.description is not null %}
                    <p>{{ datalist_value(data_row, list.view.description.path, list.view.description.options)|truncate(25) }}</p>
                {% endif %}
                <p>
                    {{ block('row_actions') }}
                </p>
            </div>
        </div>
    </li>
    {% endfor %}
</ul>
{% endblock %}

{% block list_thumbnail_visual %}
    {% if(list.view.image is defined) %}
        {% set image_src = datalist_value(data_row, list.view.image.path, list.view.image.options) %}
        <img src="{{ image_src|imresize('admin_thumb') }}" data-src="{{ asset(image_src) }}" alt="Caption"/>
    {% else %}
        <img src="http://placehold.it/260x180" alt="Caption"/>
    {% endif %}
{% endblock %}

{# common list widgets #}
{% block row_actions %}
    {% for action_route, action_config in list.actions %}
        {% set action_path = path(action_route, action_config.parameters | merge({'id': data_row.id })) %}
        <a class="btn btn-small" {{ block('row_action_confirm_attributes') }}href="{{ action_path }}">
            {% if action_config.options.icon is defined %}<i class="{{ action_config.options.icon }}"></i>{% endif %}
            {{ action_config.options.label|trans({}, 'SnowcapAdminBundle') }}
        </a>
    {% endfor %}
{% endblock %}

{% block row_action_confirm_attributes %}
    {% if action_config.options.confirm %}
        {% set options = action_config.options %}
        {% set confirm_attrs = ['confirm_title', 'confirm_confirm', 'confirm_cancel', 'confirm_body'] %}
        {% spaceless %}data-confirm="confirm" {% for confirm_attr in confirm_attrs %}data-{{ confirm_attr }}="{{ attribute(options, confirm_attr)|trans({}, 'SnowcapAdminBundle') }}" {% endfor %}{% endspaceless %}
    {% endif %}
{% endblock %}
{% extends 'form_div_layout.html.twig' %}

{% block fieldset_widget %}
{% spaceless %}
    <fieldset>
        <legend>{{ legend }}</legend>
        {{ block('field_rows') }}
    </fieldset>
{% endspaceless %}
{% endblock fieldset_widget %}

{% block fieldset_row %}
    {{ form_widget(form, {'attr': widget_attr|default({})}) }}
{% endblock %}

{% block field_row %}
{% spaceless %}
    <div class="form-row">
        {{ form_label(form) }}
        {{ form_errors(form) }}
        {{ form_widget(form, {'attr': widget_attr|default({})}) }}
    </div>
{% endspaceless %}
{% endblock field_row %}

{% block datetime_widget %}
    {% set attr = attr|merge({'class': 'widget-datepicker' }) %}
    {{ block('field_widget') }}
{% endblock %}

{% block slug_widget %}
    {% set attr = attr|merge({'class': 'widget-slug widget-slug-' ~ target }) %}
    {{ block('field_widget') }}
{% endblock slug_widget %}

{% block markdown_widget %}
    {% set attr = attr|merge({'class': 'widget-markdown' }) %}
    {{ block('textarea_widget') }}
{% endblock markdown_widget %}

{% block form_widget %}
{% spaceless %}
    {% set attr = attr|merge({'class': 'form'}) %}
    <div {{ block('widget_container_attributes') }}>
        {{ block('field_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock form_widget %}

{% block _client_logo_widget %}

        <div>
            {% set image = form.parent.vars.value.logo %}

            {% if image is not empty %}<img src="{{ asset(image) }}" width="150" style="padding-right:5px;">{% endif %}
            <div>
                {{ form_errors(form) }}
                {{ form_widget(form, {'attr': widget_attr|default({})}) }}

            </div>
        </div>

{% endblock %}

{% block _work_visual_widget %}

        <div>
            {% set image = form.parent.vars.value.visual %}

            {% if image is not empty %}<img src="{{ asset(image) }}" width="150" style="padding-right:5px;">{% endif %}
            <div>
                {{ form_errors(form) }}
                {{ form_widget(form, {'attr': widget_attr|default({})}) }}

            </div>
        </div>

{% endblock %}

{% block _work_thumb_widget %}

        <div>
            {% set image = form.parent.vars.value.thumb %}

            {% if image is not empty %}<img src="{{ asset(image) }}" width="150" style="padding-right:5px;">{% endif %}
            <div>
                {{ form_errors(form) }}
                {{ form_widget(form, {'attr': widget_attr|default({})}) }}

            </div>
        </div>

{% endblock %}

{% block _page_home_visual_widget %}

        <div>
            {% set image = form.parent.vars.value.homevisual %}

            {% if image is not empty %}<img src="{{ asset(image) }}" width="150" style="padding-right:5px;">{% endif %}
            <div>
                {{ form_errors(form) }}
                {{ form_widget(form, {'attr': widget_attr|default({})}) }}

            </div>
        </div>

{% endblock %}

{% block _work_materials_widget %}
{% spaceless %}
    {% if prototype is defined %}
        {% set attr = attr|merge({'data-prototype': form_row(prototype) }) %}
    {% endif %}
    {{ block('materials_widget') }}

    <hr size="1" width="100%" noshade />

    <a href="#" class="add_material">Add a material</a>

{% endspaceless %}
{% endblock %}

{% block materials_widget %}
{% spaceless %}
    <div {{ block('widget_container_attributes') }}>
        {{ block('materials_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock materials_widget %}

{% block materials_rows %}
{% spaceless %}
    {{ form_errors(form) }}
    {% for material in form %}
        <div>

            {% set row = material.get('value') %}
            {% if row.vimeoid is not empty %}
                <iframe src="http://player.vimeo.com/video/{{ row.vimeoid }}?title=0&byline=0&portrait=0&color=ffffff" width="400" height="225" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>
            {% endif %}

            {% if row.picture is not empty %}<img width="150" src="{{ asset(row.picture) }}">{% endif %}
            <div>
                {{ form_errors(material) }}
                {{ form_widget(material, {'attr': widget_attr|default({})}) }}

            </div>
        </div>
    {% endfor %}
{% endspaceless %}
{% endblock materials_rows %}



{% block _page_images_widget %}
{% spaceless %}
    {% if prototype is defined %}
        {% set attr = attr|merge({'data-prototype': form_row(prototype) }) %}
    {% endif %}
    {{ block('images_widget') }}

    <hr size="1" width="100%" noshade />

    <a href="#" class="add_image">Add an image</a>

{% endspaceless %}
{% endblock %}

{% block images_widget %}
{% spaceless %}
    <div {{ block('widget_container_attributes') }}>
        {{ block('images_rows') }}
        {{ form_rest(form) }}
    </div>
{% endspaceless %}
{% endblock images_widget %}

{% block images_rows %}
{% spaceless %}
    {{ form_errors(form) }}
    {% for image in form %}
        <div>

            {% set productimage = image.get('value') %}

            <img width="150" src="{{ asset(productimage.webPath) }}" />
            <p>
            <small>
            To insert this image in your content, copy/paste the following tag:<br/><strong>![{{productimage.getalt}}](/{{ productimage.webPath }} "{{ productimage.getname }}")</strong>
            </small>
            </p>
            <div>

                {{ form_errors(image) }}
                {{ form_widget(image, {'attr': widget_attr|default({})}) }}

            </div>
        </div>
    {% endfor %}
{% endspaceless %}
{% endblock images_rows %}